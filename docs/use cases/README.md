# Модель прецедентів

## 1. Діаграма прецедентів

</center>

Загальна схема

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    left to right direction

    actor "Гість" as Guest
    actor "Користувач" as User
    actor "Адміністратор" as Expert

    usecase "Log in\nЗареєструвати обліковий запис" as UC_1
    usecase "Sign in\nУвійти в обліковий запис" as UC_2
    usecase "Log out\nВийти із обікового запису" as UC_3
    usecase "Media content management\nЗапити на пошук та експорт медіа-контенту" as UC_4
    usecase "Account management\nВнесення змін до облікових записів" as UC_5
    usecase "Getting information about users\nПереглянути інформацію щодо облікових записів користувачів" as UC_6

    Guest --> UC_1
    Guest --> UC_2
    Guest --> UC_3

    User --|> Guest
    User --> UC_4

    Expert --|> Guest
    Expert --> UC_5
    Expert --> UC_6

@enduml

</center>

</center>

Схема користувача

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    actor "Користувач" as User

    usecase "Створення та використання облікового запису" as CreateAccount
    usecase "Створення одного або кількох запитів для аналізу медіа-контенту" as CreateQueries
    usecase "Встановлення фільтрів для аналізу інформації" as SetFilters
    usecase "Побудова звітів та візуалізація даних" as BuildReports
    usecase "Перегляд історії запитів" as ViewHistory
    usecase "Порівняння результатів аналізу даних" as CompareResults
    usecase "Експорт звітів аналізу інформації" as ExportReports

    User -u-> CreateAccount
    User -u-> CreateQueries
    User -u-> SetFilters
    User -r-> BuildReports
    User --> ViewHistory
    User --> CompareResults
    User -l-> ExportReports

@enduml

</center>

</center>

Схема адміністратора

<center style="
    border-radius:4px;
    border: 1px solid #cfd7e6;
    box-shadow: 0 1px 3px 0 rgba(89,105,129,.05), 0 1px 1px 0 rgba(0,0,0,.025);
    padding: 1em;"
>

@startuml

    actor "Адміністратор" as Admin

    usecase "Управління користувачами і правами доступу" as AccessRights
    usecase "Налаштування параметрів аналізу та пошуку" as SearchParameters
    usecase "Моніторинг ресурсів і продуктивності системи" as ResourceManagement
    usecase "Забезпечення безпеки даних" as SystemSecurity
    usecase "Підтримка користувачів" as UserSupport
    usecase "Моніторинг та адміністрування системи" as SystemAdministration 
    usecase "Керування базами даних" as DatabaseManagement

    Admin -u-> AccessRights
    Admin -u-> SearchParameters
    Admin -u-> ResourceManagement
    Admin -r-> SystemSecurity
    Admin --> UserSupport
    Admin --> SystemAdministration
    Admin -l-> DatabaseManagement

@enduml

</center>

## Сценарії використання для користувача

| **_ID:_**                | USER.REGISTRATION                                                           |
| ------------------------ | --------------------------------------------------------------------------- |
| **_НАЗВА:_**             | Реєстрація користувача в системі                                            |
| **_УЧАСНИКИ:_**          | Користувач, Система                                                         |
| **_ПЕРЕДУМОВИ:_**        | 1. Користувач не зареєстрований у системі                                   |
|                          | 2. Користувач не війшов до системи за допомогою існуючого облікового запису |
| **_РЕЗУЛЬТАТ:_**         | Новий обліковий запис                                                       |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Користувач вже зареєстрований(USER.REGISTRATION_EXIST == True)           |
|                          | 2. Поля містять недопустимі символи (USER.INJECTION_DENY)                   |
|                          | 3. Багато здійсненних запитів за останні 5 хвилин (USER.DDOS_DENY)          |

**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

    |Користувач|
    start
    : Вводить реєстраційні дані;

    |Система|
    : Система перевіряє передані реєстраційні дані
    <font color="red"><b>USER.REGISTRATION_EXIST == True
    <font color="red"><b>USER.INJECTION_DENY
    <font color="red"><b>USER.DDOS_DENY;

    : Система створює новий обліковий
    запис, використовуючи введені дані;

    : Система надає користувачу інформацію
    про створення облікового запису;

    |Користувач|  
    : Завершує взаємодію з системою;

    stop;

@enduml

| **_ID:_**                | USER.LOG_IN                                                        |
| ------------------------ | ------------------------------------------------------------------ |
| **_НАЗВА:_**             | Вхід користувача до системи                                        |
| **_УЧАСНИКИ:_**          | Користувач, Система                                                |
| **_ПЕРЕДУМОВИ:_**        | Користувач зареєстрований у системі                                |
| **_РЕЗУЛЬТАТ:_**         | Вхід в систему                                                     |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Такого користуавача не існує (USER.REGISTRATION_EXIST == False) |
|                          | 2. Поля містять недопустимі символи (USER.INJECTION_DENY)          |
|                          | 3. Багато здійсненних запитів за останні 5 хвилин (USER.DDOS_DENY) |

**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

    |Користувач|
    start
    : Вводить дані логіну та паролю ;

    |Система|
    : Система перевіряє передані реєстраційні дані
    <font color="red"><b>USER.REGISTRATION_EXIST == False
    <font color="red"><b>USER.INJECTION_DENY
    <font color="red"><b>USER.DDOS_DENY;

    : Система перевіряє відповідність ідентифікаторів ;

    : Система автентифікує користувача ;

    : Система авторизує користувача;

    |Користувач|  
    : Отримуэ доступ до системи 

stop;

@enduml

| **_ID:_**                | USER.LOG_OUT                                           |
| ------------------------ | ------------------------------------------------------ |
| **_НАЗВА:_**             | Вихід користувача з системи                            |
| **_УЧАСНИКИ:_**          | Користувач, Система                                    |
| **_ПЕРЕДУМОВИ:_**        | Користувач зареєстрований у системі                    |
| **_РЕЗУЛЬТАТ:_**         | Вихід з системи                                        |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | Користувач вже вийшов з системи (USER.ONLINE == False) |

**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

    |Користувач|
    start
    : Користувач надсилає запит
    на вихід з системи;

    |Система|
    : Система перевіряє передані реєстраційні дані
    <font color="red"><b>USER.ONLINE == False;

    : Система завершає поточну
    сессію з користувачем;

    : Система повідомляє користувача
    про те що він вийшов з системи;

    : Система перенаправляє користувача
    на головну сторінку додатку;

    |Користувач|
    : Завершує взаємодію з системою;

    stop;

@enduml

| **_ID:_**                | USER.SEARCH_REQUEST                                                          |
| ------------------------ | ---------------------------------------------------------------------------- |
| **_НАЗВА:_**             | Користувач надає запит на знаходження інформації                             |
| **_УЧАСНИКИ:_**          | Користувач, Система                                                          |
| **_ПЕРЕДУМОВИ:_**        | Користувач авторизований в системі                                           |
| **_РЕЗУЛЬТАТ:_**         | Дані знайдено і виведено на екран користувача                                |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Поля містять недопустимі символи (USER.INJECTION_DENY)                    |
|                          | 2. Запит порушує ліцензійну угоду з кінцевим користувачем(USER.LICENSE_DENY) |
|                          | 3. Багато здійсненних запитів за останні 5 хвилин (USER.DDOS_DENY)           |

**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

    |Користувач|
    start
    : Користувач відправляє запит на пошук;

    |Система|
    : Система виводить форму
    для заповнення користувачем;

    |Користувач|
    : Користувач заповнює форму;

    |Система|
    : Система проводить пошук по
    базам даних заданих ресурсів
    <font color="red"><b>USER.INJECTION_DENY
    <font color="red"><b>USER.LICENSE_DENY
    <font color="red"><b>USER.DDOS_DENY;

    : Система виводить результат на екран користувача;

    |Користувач|
    : Користувач працює з інформацією

    stop;

@enduml

| **_ID:_**                | USER.EXPORT_REQUEST                                                      |
| ------------------------ | ------------------------------------------------------------------------ |
| **_НАЗВА:_**             | Користувач надає запит на експорт інформації                             |
| **_УЧАСНИКИ:_**          | Користувач, Система                                                      |
| **_ПЕРЕДУМОВИ:_**        | 1. Користувач авторизований в системі                                    |
|                          | 2. Користувач виконав запит на пошук даних                               |
| **_РЕЗУЛЬТАТ:_**         | Користувач експортував дані на свою систему у вигляді CSV/JSON/PDF файлу |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Помилка у формуванні файлу (USER.EXPORT_ERROR)                        |
|                          | 2. Багато здійсненних запитів за останні 5 хвилин (USER.DDOS_DENY)       |

**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

    |Користувач|
    start
    : Користувач обирає у якому форматі
    він хоче експортувати результати пошуку;

    : Користувач відправляє запит
    на експорт інформації;

    |Система|
    : Система генерує файл та
    надсилає його як відповідь на запит
    <font color="red"><b>USER.EXPORT_ERROR
    <font color="red"><b>USER.DDOS_DENY;

    |Користувач|
    : Користувач отримує файл і
    завершує взаємодію з системою;
    stop;

@enduml

## Сценарії використання для адміністратора

| **_ID:_**                | ADMIN.USER_PASSWORD_RESET                                          |
| ------------------------ | ------------------------------------------------------------------ |
| **_НАЗВА:_**             | Зміна паролю від облікового запису                                 |
| **_УЧАСНИКИ:_**          | Адміністратор, Система                                             |
| **_ПЕРЕДУМОВИ:_**        | Адміністратор війшов до системи                                    |
| **_РЕЗУЛЬТАТ:_**         | Пароль облікового запису користувача змінено                       |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Користувач на зареєстрований (USER.REGISTRATION_EXIST == False) |
|                          | 2. Поля містять недопустимі символи (USER.INJECTION_DENY)          |

**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

    |Адміністратор|
    start
    : Адміністратор надсилає запит системі
    на зміну паролю користувача ;

    |Система|
    : Система змінює пароль користувача
    <font color="red"><b>USER.INJECTION_DENY
    <font color="red"><b>USER.REGISTRATION_EXIST == False;

    |Адміністратор|
    : Адміністратор отримує підтвердження
    про успішну зміну паролю;
    : Адміністратор завершує процедуру
    зміни паролю користувача;
    stop;

@enduml

### Створити обліковий запис користувача

| **_ID:_**                | ADMIN.USER_CREATE                                                  |
| ------------------------ | ------------------------------------------------------------------ |
| **_НАЗВА:_**             | Створення нового облікового запису                                 |
| **_УЧАСНИКИ:_**          | Адміністратор, Система                                             |
| **_ПЕРЕДУМОВИ:_**        | Адміністратор війшов до системи                                    |
| **_РЕЗУЛЬТАТ:_**         | Обліковий запис користувача створено                               |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Користувач вже зареєстрований(USER.REGISTRATION_EXIST == True)  |
|                          | 2. Поля містять недопустимі символи (USER.INJECTION_DENY)          |
|                          | 3. Багато здійсненних запитів за останні 5 хвилин (USER.DDOS_DENY) |

**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

    |Адміністратор|
    start;
    : Заповнює форму на реєстрацію користувача
    <font color="red"><b> USER.REGISTRATION_EXIST == True
    <font color="red"><b> USER.USER.INJECTION_DENY == True;

    |Адміністратор|
    : Надсилає запит системі
    на створення користувача
    <font color="red"><b> USER.DDOS_DENY == True;

    |Система|
    : Перевіряє отримані дані з форми;

    |Система|
    : Реєструє нового користувача;

    |Система|
    : Надсилає сповіщення адміністратору\n про успішну реєстрацію;

    |Адміністратор|
    : Повідомляє користувача про створення облікового запису
    stop;

@enduml

### Видалити обліковий запис користувача

| **_ID:_**                | ADMIN.USER_DELETE                                                  |
| ------------------------ | ------------------------------------------------------------------ |
| **_НАЗВА:_**             | Видалення облікового запису                                        |
| **_УЧАСНИКИ:_**          | Адміністратор, Система                                             |
| **_ПЕРЕДУМОВИ:_**        | Адміністратор Авторизувався в системі                              |
| **_РЕЗУЛЬТАТ:_**         | Обліковий запис користувача видалено                               |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Користувач на зареєстрований (USER.REGISTRATION_EXIST == False) |
|                          | 2. Поля містять недопустимі символи (USER.INJECTION_DENY)          |

**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

    |Адміністратор|
    start;
    : Надсилає запит системі на виделання користувача
    <font color="red"><b> USER.REGISTRATION_EXIST == True
    <font color="red"><b> USER.USER.INJECTION_DENY == True;

    |Система|
    : Видаляє користувача з бази даних;

    |Система|
    : Надсилає підтвердження про\n успішне видалення користувача;

    |Адміністратор|
    : Завершує процедуру видалення\n облікового запису користувача;
    stop;

@enduml

### Переглянути стан облікових записів користувачів

| **_ID:_**                | ADMIN.VIEW_USER_HISTORY                                  |
| ------------------------ | -------------------------------------------------------- |
| **_НАЗВА:_**             | Перегляд історії входу/виходів користувачів до/з системи |
| **_УЧАСНИКИ:_**          | Адміністратор, Система                                   |
| **_ПЕРЕДУМОВИ:_**        | Адміністратор війшов до системи                          |
| **_РЕЗУЛЬТАТ:_**         | Система надала адміністратору доступ до історії змін     |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | -                                                        |

**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

    |Адміністратор|
    start;
    : Надсилає запит на перегляду історії\n входу/виходів користувачів до/з системи;

    |Система|
    : Виводить історію входу/виходів\n користувачів до/з системи;

    |Система|
    : Закінчує процес виведення\n інформації для адміністратора;

    |Адміністратор|
    : Переглядає інформацію
    stop;

@enduml

### Переглянути історію запитів користувачів

| **_ID:_**                | ADMIN.VIEW_USER_REQUEST_HISTORY                                             |
| ------------------------ | --------------------------------------------------------------------------- |
| **_НАЗВА:_**             | Перегляд історії запитів користувача                                        |
| **_УЧАСНИКИ:_**          | Адміністратор, Система                                                      |
| **_ПЕРЕДУМОВИ:_**        | Адміністратор війшов до системи                                             |
| **_РЕЗУЛЬТАТ:_**         | Система надала адміністратору доступ до історії запитів певного користувача |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1.Користувач на зареєстрований (USER.REGISTRATION_EXIST == False)           |
|                          | 2. Поля містять недопустимі символи (USER.INJECTION_DENY)                   |
|                          | 3. Багато здійсненних запитів за останні 5 хвилин (USER.DDOS_DENY)          |

**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

    |Адміністратор|
    start;
    : Надсилає запит на перегляд історії
    запитів певного користувача
    <font color="red"><b> USER.REGISTRATION_EXIST == True
    <font color="red"><b> USER.USER.INJECTION_DENY == True
    <font color="red"><b> USER.DDOS_DENY == True;

    |Система|
    : Виводить історію запитів адміністратору;

    |Адміністратор|
    : Взаємодіє з історію запитів та подіями;

    |Адміністратор|
    : Закриває сторінку з історією запитів користувачів;
    stop;

@enduml

## Система

### Створення резервної копії бази данних

| **_ID:_**                | SYS.DB_BACKUP_CREATION                       |
| ------------------------ | -------------------------------------------- |
| **_НАЗВА:_**             | Створення бєкапу БД                          |
| **_УЧАСНИКИ:_**          | Система                                      |
| **_ПЕРЕДУМОВИ:_**        | Настання першого дня місяця о 4 годині ранку |
| **_РЕЗУЛЬТАТ:_**         | Створився бєкап бази даних                   |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | -                                            |

**_ОСНОВНИЙ СЦЕНАРІЙ:_**

@startuml

    |Система|
    start;
    : Чекає на виконання умов;
    : Копіює усі дані з БД;
    : Створює новий файл з поточним\n часом у форматі \nDD%MM%YYYY_DB_BACKUP.myd;
    : Надає підтвердження або сповіщення\n про успішне створення \nрезервної копії;
    stop;

@enduml
